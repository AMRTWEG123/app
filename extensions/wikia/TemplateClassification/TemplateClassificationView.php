<?php

namespace Wikia\TemplateClassification;

class View {

	/**
	 * Returns HTML with Template type and entry point for edit
	 * @param string $fallbackMsg
	 * @return string
	 */
	public function renderEditableType( $fallbackMsg, $user ) {
		$templateType = $this->getTemplateType();
		if ( $user->isLoggedIn() ) {
			$templateType .= $this->renderEditButton();
			return $templateType;
		} else {
			if ( $this->isTemplateClassified() ) {
				return $templateType;
			}
			return $fallbackMsg;
		}

	}

	/**
	 * Mock for frontend work
	 */
	private function getTemplateType() {
		/* Messages generated by code below
		 * template-classification-type-unclassified
		 */
		return wfMessage( 'template-classification-type-'.\TemplateClassification::TEMPLATE_UNCLASSIFIED )->escaped();
	}

	/**
	 * Mock for frontend work
	 */
	private function isTemplateClassified() {
		return false;
	}

	private function renderEditButton() {
		return \Html::element( 'a', [ 'class' => 'template-classification-edit sprite-small edit', ], ' ' );
	}
}
