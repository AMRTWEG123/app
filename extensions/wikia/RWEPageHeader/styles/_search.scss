@import 'skins/shared/color';
@import 'skins/shared/mixins/placeholder';

$background-color-mix: 10%;
$black: #000;

$active-color: lighten($color-links, 20%);
$inactive-color: lighten($color-text, 50%);
@if $is-dark-wiki {
	$active-color: darken($color-links, 20%);
	$inactive-color: darken($color-text, 50%);
}

$background-color: mix(mix($color-buttons, $black, $background-color-mix * 5), $color-page, $background-color-mix);

$search-button-height: 100%;
$search-button-width: 100%;
$search-close-button-padding-right: 8px;
$search-expanded-width: 100%;
$search-initial-width: 110px;
$search-input-padding: 3px 4px 2px 4px;
$search-form-height: 34px;
$search-form-margin-top: 7px;
$search-form-wrapper-initial-width: $search-initial-width + 16px;
$search-submit-button-padding: 5px 9px;
$search-suggestion-z-index: 2;
$search-transition-long: .3s;
$search-transition-short: 50ms 150ms;

#searchInputWrapperRWE {
	border-bottom: solid 1px transparent;
}

#searchInputRWE {
	background: transparent;
	padding: $search-input-padding;

	@include placeholder {
		color: $color-text;
		font-size: $wds-typescale-size-base;
		font-weight: bold;
		height: $wds-line-height;
		line-height: 100%;
	}
}

#searchFormWrapperRWE {
	border-top: 0;
	margin-bottom: 0;
	width: $search-form-wrapper-initial-width;

	&:hover {
		.wds-global-navigation__search-label {
			svg {
				fill: $color-links;
			}

			.wds-global-navigation__search-input {
				@include placeholder {
					color: $color-links;
					transition-delay: 0s;
					transition-duration: 0s;
				}

				cursor: pointer;
			}
		}
	}

	.wds-global-navigation__search {
		background-color: $color-page;
		border-top: 0;
		height: $search-form-height;
		margin-top: $search-form-margin-top;
		padding: 0;
		position: absolute;
		right: 0;
		transition: width $search-transition-long;
		width: $search-initial-width;
	}

	.wds-global-navigation__search-label {
		background: transparent;

		svg {
			fill: $inactive-color;
			margin: 0 2px 0 0;
		}

		input {
			@include placeholder {
				transition-delay: 0s;
				transition-duration: 0s;
			}
		}
	}

	.wds-global-navigation__search-close {
		background: none;
		height: $search-button-height;
		transition-delay: 150ms;

		svg {
			fill: $inactive-color;
		}
	}

	.wds-global-navigation__search-submit {
		background: $color-links;
		border-radius: 0;
		display: inline-block;
		height: $search-button-height;
		max-width: 0;
		opacity: 0;
		transition: background-color $search-transition-long,
					border-color $search-transition-long,
					color $search-transition-long,
					max-width $search-transition-short,
					opacity $search-transition-long,
					padding $search-transition-short;
	}

	.wds-global-navigation__search-suggestions {
		background-color: $background-color;
		border-top-color: $color-links;
		z-index: $search-suggestion-z-index;
	}

	.wds-global-navigation__dropdown-link {
		color: $color-text;

		&:hover {
			color: $color-links;
		}
	}

	.wds-dropdown__content {
		box-shadow: 0 5px 10px 0 rgba(26, 26, 26, .3);
	}

	&.wds-search-is-active {
		transition: width $search-transition-long;

		.wds-global-navigation__search {
			width: $search-expanded-width;
		}

		#searchInputWrapperRWE {
			border-bottom-color: $color-text;

			&.wds-is-active {
				border-bottom-color: $color-links;
			}
		}

		#searchInputRWE {
			color: $color-text;

			@include placeholder {
				color: $inactive-color;
				font-size: $wds-typescale-size-minus-1;
				font-weight: normal;
			}
		}

		.wds-global-navigation__search-label {
			svg {
				fill: $color-text;
			}
		}

		.wds-global-navigation__search-input:hover {
			cursor: auto;
		}

		.wds-global-navigation__search-submit {
			max-width: $search-button-width;
			opacity: 1;
			padding: $search-submit-button-padding;

			&:hover:not(:disabled) {
				background-color: $active-color;
				border-color: $active-color;
				opacity: 1;
			}

			&:disabled {
				cursor: default;
				opacity: .5;
			}
		}

		.wds-global-navigation__search-close {
			max-width: $search-button-width;
			opacity: 1;
			padding-right: $search-close-button-padding-right;
			transition-delay: 150ms;
		}
	}
}
